# 브라우저와 동작 원리

## 브라우저 주요 기능
브라우저의 주요 기능은 사용자가 선택한 자원을 서버에 요청하고 브라우저에 표시하는 것이다. 자원은 보통 HTML 문서지만 PDF나 Image 또는 다른 형태일 수 있다. 자원의 주소는 URI에 의해 정해진다. 브라우저 웹 표준화 기구인 W3C에서 정한 명세에 따라 파일을 해석해서 표시한다. 브라우저의 UI는 브라우저 마다 서로 닮아 있는데, 다음과 같은 요소들이 일반적이다.  
- URI를 입력할 수 있는 주소 표시 줄
- 이전 버튼과 다음 버튼
- 북마크
- 새로 고침 버튼과 현재 문서의 로드를 중단할 수 있는 정지 버튼
- 홈 버튼

## 브라우저의 구성요소
1. UI(사용자 인터페이스)
2. 브라우저 엔진 : UI와 렌더링 엔진 사이의 동작을 제어
3. 렌더링 엔진 : 요청한 콘텐츠를 표시
4. 통신 : HTTP 요청과 같은 네트워크를 호출
5. UI 백엔드 : OS 사용자 인터페이스 체계를 사용
6. 자바스크립트 해석기
7. 자료 저장소  
![image](https://d2.naver.com/content/images/2015/06/helloworld-59361-1.png)

## 렌더링 엔진
사용자가 요청한 내용을 서버로부터 받아 브라우저 화면에 표시하는 역할을 함.  
1. 표시할 수 있는 것 : HTML 및 XML 문서 + Image 를 표시할 수 있음
2. 확장 : 플러그인이나 브라우저마다 확장 기능을 이용해 PDF와 같은 유형도 표시할 수 있음
3. 종류 : 사파리, 크롬은 웹킨(WebKit)엔진 (크롬은 28버전부터 Blink)/ 파이어폭스는 모질라에서 만든 게코(GeoKo)엔진

## 동작과정
렌더링 엔진은 통신으로부터 요청한 문서의 내용을 얻은 것으로 시작하는데 문서의 내용은 보통 8KB 단위로 전송한다.  
다음은 렌더링 엔전의 기본적인 동작 과정이다.  
![image](https://d2.naver.com/content/images/2015/06/helloworld-59361-2.png)
렌더링 엔진은 HTML문서를 파싱하고 "콘텐츠 트리" 내부에서 태그를 DOM 노드로 변환한다. 그 다음 외부 CSS파일과 함께 포함된 스타일 요소도 파싱한다. 스타일 정보와 HTML표시 규칙은 "렌더 트리"라고 부르는 또 다른 트리를 생성한다.  
렌더 트리는 색상 또는 면적과 같은 시각적 속성이 있는 사각형을 포함하고 있는데 정해진 순서대로 화면에 표시된다.  
렌더 트리 생성이 끝나면 배치가 시작되는데 이것은 각 노드가 화면의 정확한 위치에 표시되는 것을 의미한다. 다음은 UI 백엔드에서 렌더 트리의 각 노드를 가로지르며 형상을 만들어 내는 그리기 과정이다.  
일련의 과정들이 점진적으로 진행된다는 것을 아는 것이 중요하다. 렌더링 엔진은 좀 더 나은 사용자 경험을 위해 가능하면 빠르게 내용을 표시하는데 모든 HTML을 파싱할 때까지 기다리지 않고 배치와 그리기 과정을 시작한다. 네트워크로부터 나머지 내용이 전송되기를 기다리는 동시에 받은 내용의 일부를 먼저 화면에 표시하는 것이다.

  
- 웹킷동작과정
![image](https://media.vlpt.us/images/zansol/post/44250de2-945a-4876-b038-c98278bd7ad8/image.png)  
- 모질라의 게코 렌더링 엔진 동작 과정
![image](https://media.vlpt.us/images/zansol/post/74f4ebaa-e8ab-4ffc-9806-e231b9326267/image.png)

## 참고 자료📚
- [브라우저 동작원리 velong](https://velog.io/@zansol/%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80-%EB%8F%99%EC%9E%91%EC%9B%90%EB%A6%AC)
- [브라우저 동작원리 Naver D2](https://d2.naver.com/helloworld/59361)
